# Архитектура диалоговой системы для анализа экономических новостей

## Общая структура системы

Диалоговая система для анализа экономических новостей будет состоять из следующих основных модулей:

1. **Модуль сбора новостей** - отвечает за парсинг экономических новостей из указанных источников
2. **Модуль анализа новостей** - обрабатывает собранные новости с помощью языковой модели
3. **Диалоговый интерфейс** - обеспечивает взаимодействие с пользователем
4. **Модуль управления диалогом** - координирует работу всех компонентов системы

## Детальное описание модулей

### 1. Модуль сбора новостей

**Назначение**: Автоматический сбор экономических новостей из указанных источников.

**Компоненты**:
- Парсер HTML-страниц (для сайтов без API)
- Обработчик API (для источников с доступным API)
- Система хранения новостей (локальная база данных)

**Функции**:
- Получение HTML-страниц новостных сайтов
- Извлечение заголовков, текстов, дат публикации и URL новостей
- Фильтрация новостей по экономической тематике
- Сохранение структурированных данных

**Источники новостей**:
- RBC (https://www.rbc.ru)
- РИА Новости (https://sn.ria.ru)
- RBC Crypto (https://www.rbc.ru/crypto/)
- RBC Economics (https://www.rbc.ru/economics/)

### 2. Модуль анализа новостей

**Назначение**: Анализ собранных новостей с использованием языковой модели.

**Компоненты**:
- Интерфейс взаимодействия с языковой моделью (API llm7.io)
- Система предварительной обработки текста
- Система категоризации новостей

**Функции**:
- Предварительная обработка текстов новостей
- Анализ тональности новостей (позитивная/негативная/нейтральная)
- Выделение ключевых экономических показателей и событий
- Категоризация новостей по темам (валютный рынок, фондовый рынок, криптовалюты и т.д.)
- Генерация краткого резюме по группе новостей

### 3. Диалоговый интерфейс

**Назначение**: Обеспечение взаимодействия с пользователем через консольный интерфейс.

**Компоненты**:
- Консольный интерфейс ввода/вывода
- Система обработки пользовательских запросов

**Функции**:
- Прием текстовых запросов от пользователя
- Отображение результатов анализа и ответов системы
- Поддержка базовых команд для управления системой

### 4. Модуль управления диалогом

**Назначение**: Координация работы всех компонентов системы и управление диалогом.

**Компоненты**:
- Система определения намерений пользователя
- Система управления контекстом диалога
- Интерфейс взаимодействия с языковой моделью для генерации ответов

**Функции**:
- Определение намерений пользователя на основе запроса
- Поддержание контекста диалога
- Формирование запросов к языковой модели
- Генерация ответов на основе результатов анализа и контекста диалога

## Схема взаимодействия компонентов

```
+-------------------+     +-------------------+
| Модуль сбора      |     | Модуль анализа    |
| новостей          |---->| новостей          |
+-------------------+     +-------------------+
         ^                         |
         |                         v
+-------------------+     +-------------------+
| Модуль управления |<--->| Диалоговый        |
| диалогом          |     | интерфейс         |
+-------------------+     +-------------------+
         ^                         ^
         |                         |
         v                         v
+-------------------+     +-------------------+
| Языковая модель   |     | Пользователь      |
| (API llm7.io)     |     |                   |
+-------------------+     +-------------------+
```

## Основные функции системы

1. **Сбор и анализ новостей**:
   - Автоматический сбор экономических новостей из указанных источников
   - Анализ тональности и содержания новостей
   - Категоризация новостей по темам

2. **Информационные запросы**:
   - Предоставление последних новостей по запрошенной теме
   - Поиск новостей по ключевым словам
   - Получение аналитической сводки по экономической ситуации

3. **Аналитические функции**:
   - Выявление трендов на основе анализа новостей
   - Оценка влияния новостей на экономические показатели
   - Прогнозирование возможных изменений на основе новостного фона

4. **Диалоговые возможности**:
   - Ведение осмысленного диалога по экономическим темам
   - Ответы на вопросы пользователя о конкретных экономических событиях
   - Объяснение экономических терминов и понятий

## Технологический стек

1. **Язык программирования**: Python 3.x
2. **Библиотеки для парсинга**:
   - requests - для HTTP-запросов
   - BeautifulSoup4 - для парсинга HTML
   - lxml - для обработки XML/HTML

3. **Работа с языковой моделью**:
   - openai - для взаимодействия с API llm7.io

4. **Хранение данных**:
   - sqlite3 - для локальной базы данных
   - json - для хранения промежуточных результатов

5. **Консольный интерфейс**:
   - rich - для улучшенного форматирования текста в консоли
   - prompt_toolkit - для создания интерактивного консольного интерфейса
